(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{6073:function(e,s,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/autonomous_software_general/monorepo_infrastructure",function(){return o(6738)}])},6738:function(e,s,o){"use strict";o.r(s),o.d(s,{__toc:function(){return h},default:function(){return p}});var n=o(5893),i=o(2673),r=o(7913),t=o(4102);o(3150),o(9128);var a=o(2643),l={src:"/_next/static/media/infrastructure.9106ed3d.jpg",height:303,width:512,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAAqoT/xAAaEAACAwEBAAAAAAAAAAAAAAACAwEEEQAS/9oACAEBAAE/ADrMNiIO03Ak9zI9d//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQIBAT8AuI//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==",blurWidth:8,blurHeight:5},c={src:"/_next/static/media/vscode_docker_extension.c0d85d3e.jpg",height:349,width:512,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAngP/xAAbEAACAQUAAAAAAAAAAAAAAAABAgMAERITIf/aAAgBAQABPwDcVikuiMyyYKxHQAK//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwB//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwB//9k=",blurWidth:8,blurHeight:5},d=o(9013);let h=[{depth:2,value:"History",id:"history"},{depth:3,value:"Early Autodrive",id:"early-autodrive"},{depth:3,value:"Docker and the Introduction of WATcloud",id:"docker-and-the-introduction-of-watcloud"},{depth:3,value:"Optimizing Development QoL",id:"optimizing-development-qol"},{depth:2,value:"How It Works",id:"how-it-works"},{depth:3,value:"A Visual Understanding",id:"a-visual-understanding"},{depth:3,value:"On Startup",id:"on-startup"},{depth:3,value:"Communication",id:"communication"},{depth:2,value:"How to Use",id:"how-to-use"},{depth:3,value:"Edit your watod-config.sh",id:"edit-your-watod-configsh"},{depth:3,value:"Build the Code",id:"build-the-code"},{depth:3,value:"Run the Code",id:"run-the-code"},{depth:2,value:"How to Actually Use",id:"how-to-actually-use"},{depth:3,value:"What are Services?",id:"what-are-services"},{depth:3,value:"Developing in the Monorepo Infrastructure",id:"developing-in-the-monorepo-infrastructure"},{depth:4,value:"Developing outside a container \uD83C\uDFD5️",id:"developing-outside-a-container-️"},{depth:4,value:"Developing inside a container \uD83C\uDFE1",id:"developing-inside-a-container-"},{depth:3,value:"Docker Registries",id:"docker-registries"}];function _createMdxContent(e){let s=Object.assign({h1:"h1",p:"p",h2:"h2",h3:"h3",a:"a",ul:"ul",li:"li",strong:"strong",img:"img",code:"code",pre:"pre",span:"span",h4:"h4"},(0,a.a)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{children:"Monorepo Infrastructure"}),"\n",(0,n.jsx)(s.p,{children:"As our team continues to encompass more fields of robotics around the school, the one thing holding us all together is our software infrastructure. The WATonomous Monorepo Infrastructure is a heavily optimized build and development system utilizing industry-standard software tools such as ROS2, Docker, Docker Compose, and Foxglove."}),"\n",(0,n.jsx)(s.p,{children:"We aim to further optimize our Monorepo Infrastructure as time progresses."}),"\n",(0,n.jsx)(d.UW,{type:"warning",emoji:"️\uD83D\uDCA1",children:(0,n.jsx)(s.p,{children:"Maintenance of the Monorepo Infrastructure is a joint responsibility by all Autonomy Directors of WATonomous"})}),"\n",(0,n.jsx)(s.h2,{id:"history",children:"History"}),"\n",(0,n.jsx)(s.h3,{id:"early-autodrive",children:"Early Autodrive"}),"\n",(0,n.jsxs)(s.p,{children:["The WATonomous monorepo originated during the ",(0,n.jsx)(s.a,{href:"https://www.autodrivechallenge.com/",children:"AutoDrive Challenge"}),", where the team faced the critical decision of selecting a software framework to support the complex demands of autonomous vehicle development. After evaluating options, the team chose the ",(0,n.jsx)(s.a,{href:"https://www.ros.org/",children:"Robotics Operating System (ROS)"})," as its primary message-passing infrastructure due to its robust ecosystem, modularity, and tools for communication and debugging. ROS’s publish-subscribe model allowed different teams to independently develop components like perception, localization, and control while maintaining seamless integration."]}),"\n",(0,n.jsx)(s.p,{children:"This decision established a scalable and flexible foundation for the team’s software architecture, enabling rapid iteration and collaboration. As the project evolved, the monorepo grew to include custom solutions tailored to the competition’s unique challenges, solidifying WATonomous's ability to tackle sophisticated autonomous driving tasks efficiently."}),"\n",(0,n.jsx)(s.h3,{id:"docker-and-the-introduction-of-watcloud",children:"Docker and the Introduction of WATcloud"}),"\n",(0,n.jsxs)(s.p,{children:["As the project grew, team members faced challenges with dependency management and reproducibility. Frequent updates and compatibility issues disrupted workflows, and the introduction of a shared compute cluster (",(0,n.jsx)(s.a,{href:"https://cloud.watonomous.ca/",children:"WATcloud"}),") made managing environments even more complex. To address these problems, ",(0,n.jsx)(s.a,{href:"https://www.docker.com/company/",children:"Docker"})," and ",(0,n.jsx)(s.a,{href:"https://docs.docker.com/compose/",children:"Docker Compose"})," were introduced into the repository."]}),"\n",(0,n.jsx)(s.p,{children:"Docker allowed the team to encapsulate the software environment, including dependencies and configurations, into portable containers. This ensured consistent execution across local machines and the shared cluster, eliminating environment mismatches and streamlining workflows. Docker's adoption improved collaboration, reproducibility, and scalability, becoming a key enabler for the monorepo’s continued development."}),"\n",(0,n.jsx)(s.h3,{id:"optimizing-development-qol",children:"Optimizing Development QoL"}),"\n",(0,n.jsx)(s.p,{children:"While the introduction of Docker was a game-changer for reproducibility and consistency, it also introduced new challenges. One major hurdle was the steep learning curve for new members, who not only had to grasp ROS but also learn containerization basics. This created a significant onboarding barrier and slowed development for newcomers."}),"\n",(0,n.jsx)(s.p,{children:"To address this, the team shifted focus toward abstracting Docker from the everyday developer’s workflow. This includes automating common tasks under shell scripts (watod) to reduce the need for deep Docker expertise. Other key improvements to the monorepo infrastructure included:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Foxglove Integration:"})," ",(0,n.jsx)(s.a,{href:"https://foxglove.dev/product?utm_term=ros%20visualization&utm_campaign=Alternatives+to+Foxglove&utm_source=adwords&utm_medium=ppc&hsa_acc=7660688999&hsa_cam=13033285199&hsa_grp=118842211861&hsa_ad=520284632119&hsa_src=g&hsa_tgt=kwd-583367314976&hsa_kw=ros%20visualization&hsa_mt=p&hsa_net=adwords&hsa_ver=3&gad_source=1&gclid=EAIaIQobChMIn7CxkNL2iQMV60n_AR1wUACBEAAYASAAEgLIzPD_BwE",children:"Foxglove"})," replaced VNC for remote data visualization, providing a more efficient and user-friendly interface for analyzing real-time data streams."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Reverse Mounting:"})," This feature exposed coding libraries outside the Docker container, enabling developers to use local tools for code completion and navigation without being confined to the container environment."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Watod Bash Completion:"})," This feature enables terminal command completion for watod commands."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"These enhancements streamlined the development process, improved accessibility for new members, and reinforced the monorepo's adaptability and efficiency."}),"\n",(0,n.jsx)(s.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,n.jsx)(s.h3,{id:"a-visual-understanding",children:"A Visual Understanding"}),"\n",(0,n.jsx)(s.p,{children:"Below is a possible way to visualize how the Monorepo Infrastructure works:"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{placeholder:"blur",src:l})}),"\n",(0,n.jsxs)(s.p,{children:["The entire system communicates amongst itself using ROS2 messages. All the cool algorithms for perception, planning, control, etc. are wrapped in their own ROS2 nodes to function concurrently. Various nodes share ",(0,n.jsx)(s.code,{children:"docker containers"})," if they require the same libraries and tools to function (eg. two nodes may require the same version of PyTorch, so they share the same docker container)."]}),"\n",(0,n.jsx)(s.h3,{id:"on-startup",children:"On Startup"}),"\n",(0,n.jsx)(s.p,{children:"The visualization of the tech stack above represents our code in a running state. On startup, watod (docker-compose under the hood) is used to orchestrate the startup of each and every docker container, ROS2 node, and core algorithms. It carefully and automatically builds out the entire software architecture piece by piece until you end up with the visualization above."}),"\n",(0,n.jsx)(s.h3,{id:"communication",children:"Communication"}),"\n",(0,n.jsx)(d.UW,{type:"warning",emoji:"️\uD83D\uDCA1",children:(0,n.jsxs)(s.p,{children:["You don't really need to know this, but if you want to know more you can see examples of ROS2 and Docker working together ",(0,n.jsx)(s.a,{href:"https://github.com/DominikN/ros2_docker_examples",children:"here"}),"."]})}),"\n",(0,n.jsxs)(s.p,{children:["ROS 2 nodes communicate within and across containers using the DDS middleware. Within a container, nodes leverage shared memory for intra-process communication, avoiding the overhead of serialization. For inter-process communication within the same container, DDS operates over the loopback network. Across containers, nodes use a shared Docker bridge network, enabling them to communicate using container names as hostnames. DDS handles node discovery via multicast, while message transfer occurs over unicast UDP or TCP. All containers are configured with the same ",(0,n.jsx)(s.code,{children:"ROS_DOMAIN_ID"})," to ensure they participate in the same communication domain."]}),"\n",(0,n.jsx)(s.p,{children:"For optimization, shared memory is utilized for large messages on the same host, and ROS 2 QoS profiles are configured to balance reliability and performance. Critical data, such as control commands, use reliable QoS, while less critical data, like video streams, use best-effort QoS. In scenarios requiring minimal latency, containers may use host networking to bypass Docker’s network stack. This architecture enables seamless, efficient communication across nodes, whether they are within the same container or spread across multiple containers."}),"\n",(0,n.jsx)(s.h2,{id:"how-to-use",children:"How to Use"}),"\n",(0,n.jsxs)(d.Rg,{children:[(0,n.jsxs)(s.h3,{id:"edit-your-watod-configsh",children:["Edit your ",(0,n.jsx)(s.code,{children:"watod-config.sh"})]}),(0,n.jsx)(s.p,{children:"This config file includes various commented out fields that you can set. With time, you will understand what all the field do, but all that matters is you set:"}),(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"ACTIVE_MODULES"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"<the_modules_you_want_to_enable>"'})]})})}),(0,n.jsxs)(s.p,{children:["A list of possible modules to enable is given in the config. You can copy the config file to a local config named ",(0,n.jsx)(s.code,{children:"watod-config.local.sh"})," which will not be pushed onto git and overrides the default ",(0,n.jsx)(s.code,{children:"watod-config.sh"}),"."]}),(0,n.jsx)(s.h3,{id:"build-the-code",children:"Build the Code"}),(0,n.jsx)(s.p,{children:"To build all the code in the modules you want to run, use:"}),(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"build"})]})})}),(0,n.jsx)(s.h3,{id:"run-the-code",children:"Run the Code"}),(0,n.jsx)(s.p,{children:"To run the modules, simply do:"}),(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"up"})]})})})]}),"\n",(0,n.jsx)(s.p,{children:"This workflow should be exactly how any robot is started. Any bootstrapping code should be strictly prohibited."}),"\n",(0,n.jsx)(s.h2,{id:"how-to-actually-use",children:"How to Actually Use"}),"\n",(0,n.jsx)(s.p,{children:"Congratulations! You made the code run. However, this is just the tip of the iceberg. The Monorepo Infrastructure has a plethora of tools to help you develop in an efficient manner."}),"\n",(0,n.jsx)(s.p,{children:"Please go through the following to get an in-depth overview of all the tools available to you."}),"\n",(0,n.jsx)(s.h3,{id:"what-are-services",children:"What are Services?"}),"\n",(0,n.jsx)(s.p,{children:"Services are containers a module runs. A docker compose module can consist of 1 or more services. The number of services in a module is totally arbitrary and up to the system designer of your project."}),"\n",(0,n.jsx)(s.p,{children:"We generally use modules to differentiate core parts of the software stack."}),"\n",(0,n.jsx)(d.UW,{type:"info",emoji:"️ℹ️",children:(0,n.jsx)(s.p,{children:"Example. We have a module for visualization tools, and a module for the robot code itself. This lets us run the robot code without necessarily running the visualization tools and vice versa."})}),"\n",(0,n.jsx)(s.p,{children:"To specifically build and up services of your choosing, you can run:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"build"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"service_you_want_to_buil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"d"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"service_you_want_to_u"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"p"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})]})}),"\n",(0,n.jsx)(s.p,{children:"In fact, any docker compose command works with watod, so you can do some pretty cool things like:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"run"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"service_you_want_to_run_a_command_i"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"n"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"ros2"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"topic"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"list"})]})})}),"\n",(0,n.jsx)(s.h3,{id:"developing-in-the-monorepo-infrastructure",children:"Developing in the Monorepo Infrastructure"}),"\n",(0,n.jsx)(s.p,{children:"There are two ways to develop:"}),"\n",(0,n.jsx)(s.h4,{id:"developing-outside-a-container-️",children:(0,n.jsx)(s.strong,{children:"Developing outside a container \uD83C\uDFD5️"})}),"\n",(0,n.jsx)(s.p,{children:"The Monorepo Infrastructure has the ability to automatically setup your VScode environment to enable code-completion and navigation. To do so, you just need to run the following:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--setup-dev-environment"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"service_you_want_to_dev_o"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"n"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})}),"\n",(0,n.jsx)(s.p,{children:"Follow the steps prompted in the terminal and you are good to go. Use this method most of the time."}),"\n",(0,n.jsx)(s.p,{children:"To build your code and see changes, do:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"build"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"up"})]})]})}),"\n",(0,n.jsx)(s.p,{children:"If you want to make changes to only one service while keeping the other services running:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"up"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# in a separate terminal"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"build"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"service_you_want_to_buil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"d"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"down"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"service_you_want_to_buil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"d"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"service_you_want_to_buil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"d"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})]})}),"\n",(0,n.jsx)(s.p,{children:"To run ROS2 commands outside the container, use:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"run"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"servic"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"e"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"ros2_comman"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"d"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})}),"\n",(0,n.jsx)(s.p,{children:"Some examples of ROS2 commands include:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# To build and run code using roslaunch (this is if you don't want to use the roslaunch file specified in the docker-compose module file)"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"build"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"servic"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"e"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"run"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"servic"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"e"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"ros2"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"launch"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"package_nam"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"e"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"launch_fil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"e"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# To run a ros2bag"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"run"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"service_containing_bag_playe"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"r"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"ros2"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"bag"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"play"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"bag_file_path.mca"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"p"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# To debug topics"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"run"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"servic"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"e"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"ros2"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"topic"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"list"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"info"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"hz"})]})]})}),"\n",(0,n.jsx)(s.h4,{id:"developing-inside-a-container-",children:(0,n.jsx)(s.strong,{children:"Developing inside a container \uD83C\uDFE1"})}),"\n",(0,n.jsx)(s.p,{children:"The Monorepo Infrastructure has the ability to automatically setup a Docker Devcontainer for you to develop in. To do so, do the following:"}),"\n",(0,n.jsxs)(s.p,{children:["Set your ",(0,n.jsx)(s.code,{children:"watod-config.sh"})," to run in ",(0,n.jsx)(s.code,{children:"develop"})," mode:"]}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"MODE_OF_OPERATION"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"develop"'})]})})}),"\n",(0,n.jsx)(s.p,{children:"Up the service you want to dev in:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"./watod"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"servic"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"e"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})}),"\n",(0,n.jsxs)(s.p,{children:["Enter the container with VScode and go to ",(0,n.jsx)(s.code,{children:"/home/bolty/ament_ws"})," to begin developing.\n",(0,n.jsx)(s.img,{placeholder:"blur",src:c}),"\nYou can run ros2 commands natively when inside the container. Likewise, you can also run colcon build commands and roslaunch."]}),"\n",(0,n.jsx)(d.UW,{type:"warning",emoji:"️\uD83D\uDCA1",children:(0,n.jsxs)(s.p,{children:["Make sure to ",(0,n.jsx)(s.code,{children:"source /opt/watonomous/setup.bash"})," before running any ros2 commands. This points your terminal to the ROS binaries so that you can use them."]})}),"\n",(0,n.jsx)(s.p,{children:"Some examples of ROS2 commands include:"}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# To build all the code in the src"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"colcon"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"build"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# To build only specific packages "})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"colcon"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"build"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--packages-select"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"ros_packages_you_want_to_buil"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"d"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:" "}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# ROS2 debug messages"})})]})}),"\n",(0,n.jsx)(s.h3,{id:"docker-registries",children:"Docker Registries"}),"\n",(0,n.jsx)(s.p,{children:"To speed up the process of building images, the Monorepo Infrastructure utilizes docker registries to store prebuilt images for you to use."})]})}let u={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,a.a)(),e.components);return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/autonomous_software_general/monorepo_infrastructure.mdx",route:"/autonomous_software_general/monorepo_infrastructure",timestamp:1736719968e3,pageMap:[{kind:"Meta",data:{index:"Welcome to the Wiki",about:"About WATonomous","Official Website":{title:"Official Website ↗",type:"page",href:"https://www.watonomous.ca",newWindow:!0},"WATcloud Website":{title:"WATcloud Website ↗",type:"page",href:"https://cloud.watonomous.ca/docs",newWindow:!0},admission_assignments:"Admission Assignments",autonomous_platform_general:"Autonomous Platform General",autonomous_software_general:"Autonomous Software General",finance:"Finance",quest_books:"Quest Books"}},{kind:"MdxPage",name:"about",route:"/about"},{kind:"Folder",name:"admission_assignments",route:"/admission_assignments",children:[{kind:"Meta",data:{asd_admission_assignment:"ASD Admission Assignment"}},{kind:"MdxPage",name:"asd_admission_assignment",route:"/admission_assignments/asd_admission_assignment"}]},{kind:"MdxPage",name:"admission_assignments",route:"/admission_assignments"},{kind:"Folder",name:"autonomous_platform_general",route:"/autonomous_platform_general",children:[{kind:"Meta",data:{about_ap:"About Autonomous Platform"}},{kind:"MdxPage",name:"about_ap",route:"/autonomous_platform_general/about_ap"}]},{kind:"MdxPage",name:"autonomous_platform_general",route:"/autonomous_platform_general"},{kind:"Folder",name:"autonomous_software_general",route:"/autonomous_software_general",children:[{kind:"Meta",data:{about_asd:"About Autonomous Software",monorepo_infrastructure:"Monorepo Infrastructure",watcloud_dev:"Developing with WATcloud"}},{kind:"MdxPage",name:"about_asd",route:"/autonomous_software_general/about_asd"},{kind:"MdxPage",name:"monorepo_infrastructure",route:"/autonomous_software_general/monorepo_infrastructure"},{kind:"MdxPage",name:"watcloud_dev",route:"/autonomous_software_general/watcloud_dev"}]},{kind:"MdxPage",name:"autonomous_software_general",route:"/autonomous_software_general"},{kind:"Folder",name:"finance",route:"/finance",children:[{kind:"Meta",data:{creating_personal_purchases:"Creating Personal Purchases",creating_purchase_requests:"Creating Purchase Requests"}},{kind:"MdxPage",name:"creating_personal_purchases",route:"/finance/creating_personal_purchases"},{kind:"MdxPage",name:"creating_purchase_requests",route:"/finance/creating_purchase_requests"}]},{kind:"MdxPage",name:"finance",route:"/finance"},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"quest_books",route:"/quest_books",children:[{kind:"Meta",data:{w25_eve_quests:"W25 Eve Quests",w25_micro_quests:"W25 Micro Quests",w25_rover_quests:"W25 Rover Quests",w25_humanoid_quests:"W25 Humanoid Quests",w25_bizops_quests:"W25 Bizops Quests"}},{kind:"MdxPage",name:"w25_bizops_quests",route:"/quest_books/w25_bizops_quests"},{kind:"MdxPage",name:"w25_eve_quests",route:"/quest_books/w25_eve_quests"},{kind:"MdxPage",name:"w25_humanoid_quests",route:"/quest_books/w25_humanoid_quests"},{kind:"MdxPage",name:"w25_micro_quests",route:"/quest_books/w25_micro_quests"},{kind:"MdxPage",name:"w25_rover_quests",route:"/quest_books/w25_rover_quests"}]},{kind:"MdxPage",name:"quest_books",route:"/quest_books"}],flexsearch:{codeblocks:!0},title:"Monorepo Infrastructure",headings:h},pageNextRoute:"/autonomous_software_general/monorepo_infrastructure",nextraLayout:r.ZP,themeConfig:t.Z};var p=(0,i.j)(u)}},function(e){e.O(0,[879,630,774,888,179],function(){return e(e.s=6073)}),_N_E=e.O()}]);